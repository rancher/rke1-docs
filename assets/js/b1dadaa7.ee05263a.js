"use strict";(self.webpackChunkrke_docs=self.webpackChunkrke_docs||[]).push([[9664],{9610:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var r=s(5893),a=s(1151);const o={title:"System Images"},t=void 0,i={id:"config-options/system-images/system-images",title:"System Images",description:"When RKE is deploying Kubernetes, there are several images that are pulled. These images are used as Kubernetes system components as well as helping to deploy these system components.",source:"@site/docs/config-options/system-images/system-images.md",sourceDirName:"config-options/system-images",slug:"/config-options/system-images/",permalink:"/config-options/system-images/",draft:!1,unlisted:!1,editUrl:"https://github.com/rancher/rke1-docs/edit/main/docs/config-options/system-images/system-images.md",tags:[],version:"current",lastUpdatedAt:1704844723,formattedLastUpdatedAt:"Jan 9, 2024",frontMatter:{title:"System Images"},sidebar:"mySidebar",previous:{title:"Bastion/Jump Host Configuration",permalink:"/config-options/bastion-host/"},next:{title:"Default Kubernetes Services",permalink:"/config-options/services/"}},c={},l=[{value:"Air-gapped Setups",id:"air-gapped-setups",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"When RKE is deploying Kubernetes, there are several images that are pulled. These images are used as Kubernetes system components as well as helping to deploy these system components."}),"\n",(0,r.jsxs)(n.p,{children:["As of ",(0,r.jsx)(n.code,{children:"v0.1.6"}),", the functionality of a couple of the system images were consolidated into a single ",(0,r.jsx)(n.code,{children:"rancher/rke-tools"})," image to simplify and speed the deployment process."]}),"\n",(0,r.jsxs)(n.p,{children:["You can configure the ",(0,r.jsx)(n.a,{href:"/config-options/add-ons/network-plugins/",children:"network plug-ins"}),", ",(0,r.jsx)(n.a,{href:"/config-options/add-ons/ingress-controllers/",children:"ingress controller"})," and ",(0,r.jsx)(n.a,{href:"/config-options/add-ons/dns/",children:"dns provider"})," as well as the options for these add-ons separately in the ",(0,r.jsx)(n.code,{children:"cluster.yml"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Below is an example of the list of system images used to deploy Kubernetes through RKE. The default versions of Kubernetes are tied to specific versions of system images."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["For RKE v0.2.x and below, the map of versions and the system image versions is located here: ",(0,r.jsx)(n.a,{href:"https://github.com/rancher/types/blob/release/v2.2/apis/management.cattle.io/v3/k8s_defaults.go",children:"https://github.com/rancher/types/blob/release/v2.2/apis/management.cattle.io/v3/k8s_defaults.go"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["For RKE v0.3.0 and above, the map of versions and the system image versions is located here: ",(0,r.jsx)(n.a,{href:"https://github.com/rancher/kontainer-driver-metadata/blob/release-v2.7/rke/k8s_rke_system_images.go",children:"https://github.com/rancher/kontainer-driver-metadata/blob/release-v2.7/rke/k8s_rke_system_images.go"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["As versions of RKE are released, the tags on these images will no longer be up to date. This list is specific for ",(0,r.jsx)(n.code,{children:"v1.10.3-rancher2"}),"."]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'system_images:\n  etcd: rancher/coreos-etcd:v3.2.24\n  alpine: rancher/rke-tools:v0.1.24\n  nginx_proxy: rancher/rke-tools:v0.1.24\n  cert_downloader: rancher/rke-tools:v0.1.24\n  kubernetes: rancher/hyperkube:v1.13.1-rancher1\n  kubernetes_services_sidecar: rancher/rke-tools:v0.1.24\n  pod_infra_container: rancher/pause-amd64:3.1\n\n  # kube-dns images\n  kubedns: rancher/k8s-dns-kube-dns-amd64:1.15.0\n  dnsmasq: rancher/k8s-dns-dnsmasq-nanny-amd64:1.15.0\n  kubedns_sidecar: rancher/k8s-dns-sidecar-amd64:1.15.0\n  kubedns_autoscaler: rancher/cluster-proportional-autoscaler-amd64:1.0.0\n\n  # CoreDNS images\n  coredns: coredns/coredns:1.2.6\n  coredns_autoscaler: rancher/cluster-proportional-autoscaler-amd64:1.0.0\n\n  # Flannel images\n  flannel: rancher/coreos-flannel:v0.10.0\n  flannel_cni: rancher/coreos-flannel-cni:v0.3.0\n\n  # Calico images\n  calico_node: rancher/calico-node:v3.4.0\n  calico_cni: rancher/calico-cni:v3.4.0\n  calico_controllers: ""\n  calico_ctl: rancher/calico-ctl:v2.0.0\n\n  # Canal images\n  canal_node: rancher/calico-node:v3.4.0\n  canal_cni: rancher/calico-cni:v3.4.0\n  canal_flannel: rancher/coreos-flannel:v0.10.0\n\n  # Weave images\n  weave_node: weaveworks/weave-kube:2.5.0\n  weave_cni: weaveworks/weave-npc:2.5.0\n\n  # Ingress controller images\n  ingress: rancher/nginx-ingress-controller:0.21.0-rancher1\n  ingress_backend: rancher/nginx-ingress-controller-defaultbackend:1.4\n\n  # Metrics server image\n  metrics_server: rancher/metrics-server-amd64:v0.3.1\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Before ",(0,r.jsx)(n.code,{children:"v0.1.6"}),", instead of using the ",(0,r.jsx)(n.code,{children:"rancher/rke-tools"})," image, we used the following images:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"system_images:\n    alpine: alpine:latest\n    nginx_proxy: rancher/rke-nginx-proxy:v0.1.1\n    cert_downloader: rancher/rke-cert-deployer:v0.1.1\n    kubernetes_services_sidecar: rancher/rke-service-sidekick:v0.1.0\n"})}),"\n",(0,r.jsx)(n.h3,{id:"air-gapped-setups",children:"Air-gapped Setups"}),"\n",(0,r.jsxs)(n.p,{children:["If you have an air-gapped setup and cannot access ",(0,r.jsx)(n.code,{children:"docker.io"}),", you will need to set up your ",(0,r.jsx)(n.a,{href:"/config-options/private-registries/",children:"private registry"})," in your cluster configuration file. After you set up private registry, you will need to update these images to pull from your private registry."]})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>i,a:()=>t});var r=s(7294);const a={},o=r.createContext(a);function t(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);